1、资源管理实现了什么？

リソース管理は何を実現しましたか？

まず、AssetBundleのロードとアンロードを行い、ロードされたAssetBundleをキャッシュするためのAssetBundleLoaderクラスを作成します。AssetBundleLoaderを使用してAssetBundleをロードする際には、メインAssetBundleのマニフェストに基づいてそのAssetBundleのすべての依存AssetBundleを取得し、まずすべての依存AssetBundleをロードします。そして、各AssetBundleをロードするたびに、手動で参照カウントを行い、そのAssetBundleの参照カウントを1つ増やします。続いて、自分自身の参照カウントも増加させます。
次に、AssetBundleをアンロードする際には、自身の参照カウントを1つ減らします。もし参照カウントが0になった場合、そのAssetBundleをアンロードします。その後、自分の依存リソースをループで巡り、前述(zenjutsu)の操作を再帰的に呼び出して、依存リソースの参照カウントの修正とアンロードを行います。
次に、さまざまなタイプのリソースをロードするために、メインマニフェストを使用してさまざまなAPIを提供するResourceManagerクラスを実装します。エディターモードとAssetBundleモードのリソースロード方法をそれぞれ処理します。また、AssetBundleリソースをアンロードするためのAPIを提供し、リソースのアンロードを行います。

2、什么时候进行资源卸载？
いつリソースをアンロードしますか？

シーンを切り替えるとき、使用されていないAssetBundleを解放し、一回ガベージコレクションを行います。
同時に、他の開発者が特定のABリソースを即座(sokuza)に解放するかどうかを判断するためのAPIも提供します。
不要なリソースがある場合、手動でリソースをアンロードします。例えば、ある画面を閉じるときに手動でリソースをアンロードします。

【AssetBunde驻留优化】

頻繁にロードとアンロードされるAssetBundleについては、キャッシュに追加し、メモリに常駐(jouchuu)させることをお勧めします。

【断点续传】 
レジューム機能
ABファイルのダウンロードはまず一時フォルダーに行われ、すべてのABファイルのダウンロードが成功した後、persistentDataPathディレクトリに移動されます。

ABファイルをダウンロードリストに追加するかどうかは、以下の条件を判断する必要があります。

persistentDataPathディレクトリにそのABファイルが存在するかどうかを確認し、存在する場合は以前にダウンロードされたことを示しているため、ダウンロードリストに追加する必要はありません。

StreamingAssetディレクトリにそのABファイルが存在するかどうかを確認し、存在する場合はパッケージング時にすでにゲームパッケージに含まれていることを示しているため、ダウンロードリストに追加する必要はありません。

そのABファイルのダウンロードタイプがゲーム内ダウンロードまたはプレイしながらダウンロードの場合、ゲーム起動時のホットアップデートでダウンロードする必要はないため、ダウンロードリストに追加する必要はありません。

そのABファイルが一時フォルダーに存在するかどうかを確認し、存在しない場合はそのABファイルのダウンロードをスキップします。
既に存在する場合、その一時ダウンロードファイルのMD5を作成し、ダウンロードリストのMD5と比較します。MD5が一致する場合、そのABファイルのデータはダウンロード済みとしてマークされます。

Unload(false)和(true) 区别。

Unload(false)
AssetBundle 自体のみをアンロードします。
その AssetBundle から読み込まれたオブジェクト（例えば、マテリアル、テクスチャ、プレハブなど）はメモリに残ります。
読み込まれたオブジェクトはそのまま使いたいが、AssetBundle のデータは保持したくない場合に使用します。

Unload(true):
AssetBundle と、それから読み込まれたすべてのオブジェクトをアンロードします。
AssetBundle およびその読み込まれたオブジェクトが完全に不要になった場合に使用します。
より多くのメモリを解放できますが、その AssetBundle から読み込まれたオブジェクトも破棄されます。
AssetBundle から読み込まれたオブジェクトをまだ使用したい場合は Unload(false) を使用し、完全にメモリを解放したい場合は Unload(true) を使用します。






